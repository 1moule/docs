1. kex_exchange_identification: Connection closed by remote host

**solution**：

(1)cd .ssh

(2)chmod +600(+777) know_hosts

**cause：**know_hosts里面存放ssh密钥，ssh连不上并且出现这个信息是权限问题，chmod 600就行，或者重新生成一下

---

2. 运行manual.launch和rm_dbus

(1)出现报错：[rt_dbus] Unable to open dbus

(2)solution：通过在dbus.cpp中看代码可以知道，打不开dbus的串口时就会报这个错，串口之类的硬件问题直接找电路解决

---

3. 测试新拨弹method（减速比传动比都是（大比小）这样的形式，）

- 修改4处参数：

1. rm_config/config/rm_controller/${ROBOT_TYPE}.yaml：shooter_controller下的block_effort，改的比urdf中的jonit下面的<limit effort>小一点
2. shooter.transmission.urdf.xacro中actuator的减速比，如果是直驱就填电机减速器的减速比（例如3508+配套减速箱减速比是19.2032），如果有传动带（或者齿轮传动之类的）就要再乘上齿轮传动的传动比
2. shooter.urdf.xacro中joint标签下的limit标签中的effoet和 velocity，一个是关节的最大力矩，一个是关节的最大转速

（1）最大力矩要用执行器（eg:3508电机）的瞬时最大力矩乘传动比

（2）最大转速除电机减速比再除（eg:齿轮传动）传动比

- 开校准控制器看方向修改urdf里面减速比的正负
- rqt调pid，一般校准控制器给一个p就行，因为只需要他正常转动就可以
- 调shooter controller的pid，看电机曲线调，就是plotjuggler选congtroller/state，看setpoint跟process_value
- 如果对某个电机的pid没有概念（比如大概多少是大，多少是小），可以看配置文件中相同的电机的pid

---

4. 开gimbal_controller，云台会甩

- 正常情况下，开启orientation_controller、gimbal_controller，云台固定在开启控制前的位置，电机有力；因为初始的时候云台是rate模式，没有给pitch_rate跟yaw_rate的话那pitch跟yaw就必须保持静止，也就是停在当前这个位置
- **cause**：urdf中的imu的坐标系跟实际的不一样，那么
- **solution**：看实物，云台上的imu的坐标系；imu那块板上面画着他的坐标系，开rviz对比rviz里面的imu的坐标系，如果两个不一样就改urdf中的imu那个link的<interial>标签下的rpy

---

5. 开遥控器后，一直小陀螺，yaw不动

- cause：yaw线断了，导致yaw掉了，获取不到yaw跟baselink的转换，他就会一直修正那个位置

---

6. 使用网线进行调试

- 用网线连接nuc和自己的电脑
- 打开一个终端，输入命令（可以扫描出网线连接的设备的ip）：

```
nmap 10.42.0.1/24
```

- ssh连接nuc
- 如果要使用rqt、plotjuggler这些工具，要把ros_master_url改成nuc的ip

---

7. rviz看tf之类的东西，要开joint_state跟robot_state

---

8. 修改power_limit.h中的normal()，传到nuc上编译后，新代码并没有生效

- **cause**：单独编译rm_common，可以看到catkin build编译的时间很短(0.2s)，基本可以判断虽然显示编译成功，但是实际上并没有编译这个包
- **solution**：catkin clean再catkin build

---

9. 使用热点登陆nuc

- 将手机热点的ssid跟密码改成 dynamicX604_5G & dynamicx（因为配nuc的时候设置好了这个wifi，所以他会自动连接这个ssid的wifi，用存储的密码）
- 自己的电脑连接这个热点
- 在手机上看nuc的ip（有些手机不行，不行就换个手机）

---

10. 测试英雄发射重复度

problem

单发限位时歪的，会导致弹丸受力会偏，落点就会偏

---

11. hero测发射，为防止yaw移动方法

- 关闭orientation_controller，这样云台就是用底盘的位置数据来移动的，就是如果把底盘架起来，推云台的遥杆然后松开，云台会回到原来的位置，因为底盘没有动，
- 如果开启orientation_controller，那云台就是用imu的数据的，推摇杆之后，他会停在那个位置，然后让底盘follow过去
- 所以测发射的时候，把orientation_controller关了，然后把底盘架起来，他的yaw就肯定不会动，因为底盘不会动

---

12. 英雄imu一定要校准，但是步兵这些不用，因为英雄对这些东西的精度要求更高

---

13. 记住一定要确定校准成功，**终端显示校准成功也要看确保真的成功**；拨盘校准的时候放一颗弹丸就行，防止他是因为卡住弹丸而不是卡到机械限位停止反转

---

14. 左推云台遥杆然后松开，发现底盘一直缓慢follow

- 看yaw图像，松开遥杆后发现yaw的位置一直在类似正弦型的波动，猜测dbus有问题
- 查看dbus_data
