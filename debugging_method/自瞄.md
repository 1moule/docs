## 1. 击打静态装甲板

1. **修改camera_optical_frame坐标系**

- 先填入机械给的相机到pitch的偏移量（注意对于相机来说，镜头朝前的方向为z，向下为y）
- 手眼标定（方法参考：手眼标定.md）
- 根据实际情况修改偏移量的xyz、rpy，落点靠哪里就向相反方向移动
  - 因为视觉识别到的点的坐标是在camera_optical_frame坐标系下的，在这个坐标系下的位置是不会随着你的修改而改变的；通过修改相机坐标系相对pitch的偏移量，那么实际就是修改了这个点到pitch的偏移量，从而影响自瞄时pitch的移动
  - eg:当落点靠左时，我们就把相机坐标系向右偏一些，这样识别到的那个点就相对pitch会靠右一些，那么pitch下一次就不会向上一次那么左

2. **空气阻力系数**

- 越小就会认为弹道越直，抬升角度就会越小

- 调试方法：rqt向/track发送一个位置，然后换不同距离，调空气阻力系数直到每个距离都自瞄命中装甲板

- 一般来说，击打距离越远，空气阻力系数的影响越大，因为距离越远，空气阻力做功越多

3. so：
   - 先近距离击打，靠调urdf使弹丸命中装甲板中心；
   - 然后远距离击打，靠调空气阻力系数，使弹丸命中装甲板

4. **弹道解算需要的弹丸速度**

- 在rm_manal/hero.yaml中有一个参数

```yaml
shoot:
   speed_10m_per_speed: 10.0
   speed_15m_per_speed: 14.0
   speed_16m_per_speed: 16.0
   speed_18m_per_speed: 18.0
   speed_30m_per_speed: 30.0
   
   //这些是对应的射速上限下的弹丸速度，是用来给弹道解算作参数的，根据实际情况改会让弹道解算更准确一些
```

## 2. 击打旋转装甲板

1. 识别、预测部分交给视觉
2. **发射延时**
   - 在gimbal_controller中有一个参数“delay”，这个是发射延时，也就是从发出指令，到弹丸出枪管的这一段时间
   - 运行plotjuggler
   - 看/controllers/shooter_controller/state/mode
   - 看/shoot_data，或者热量等其他可以表示出枪管的数据的曲线
   - 间隔发射十几发，获得多个 mode变化的时刻 与 shoot_data变化的时刻 之间的时间差
   - 时间差求平均 即为 发射延时
